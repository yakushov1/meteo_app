# Экспорт метеоданных по API

Проект для автоматизированного сбора данных с метеостанций через API и экспорта в CSV.

## Возможности

- Аутентификация в системе
- Получение списка доступных устройств
- Выгрузка данных за указанный период
- Автоматическое сохранение в CSV
- Логирование всех операций
- Конфигурирование через `.env` файл

## Установка

1. Клонируйте репозиторий:
<code>git clone <your-repo-url></code>

2. Установите зависимости:
<code>pip install -r requirements.txt</code>

3. Настройте конфигурацию (см. раздел "Конфигурация")

## Конфигурация
Создайте файл <code>config/.env</code> (образец находится в файле <code>config/.env.example</code>)
Все параметры являются обязательными:

USERNAME - email для аутентификации

PASSWORD - пароль

auth_url - URL для аутентификации

device_url - URL для получения списка устройств

data_url - URL для получения данных

measurements - список измерений через запятую

start_day - за сколько дней до сегодняшнего начать выгрузку данных? Например, если start_day = 3, а сегодня 07.09.2025, то выгрузка будет с 04.09.2025 по 06.09.2025

### Список доступных измерений:
t - температура, в градусах Цельсия

WD - направление ветра, градусы

WM - порыв ветра, м/c

RN - осадки, мм

PR1 - атмосферное давление, мм.рт.ст.

HM - влажность, %

WV - скорость ветра, м/c

PR - атмосферное давление, гПа

UV2 - уровень ультрафиолета, Вт/м2

UV - уровнь ультрафиолета, Вт/м2 * 100

RSSI - уровень сигнала GSM

td - точка росы, градусов Цельсия



## Использование
Настройте конфигурацию в файле <code>config/.env</code>

Запустите основное приложение <code>app.py</code> без изменений.

Приложение:

Авторизуется в системе

Получает список доступных устройств и выведет их в консоль

Выбирает первое устройство из доступных (можно изменить в коде)

Скачивает данные за последнюю неделю

Сохраняет в CSV файл в папке csv/ с названием "начальная дата_конечная дата.csv"

Ведет лог в папке log/info.log

## Модули
<code>auth.py</code>
Аутентификация пользователя. Возвращает session ID при успешной авторизации.

<code>get_devices_list.py</code>
Получает список доступных устройств с их параметрами (ID, название, координаты и т.д.).

<code>get_data.py</code>
Получает данные с конкретного устройства за указанный период времени.

<code>validate_config.py</code>
Проверяет наличие всех необходимых параметров конфигурации.
